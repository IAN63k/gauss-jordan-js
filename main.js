const regex=/[-]?[0-9]+/gi,input1=document.querySelector("#ecu1"),input2=document.querySelector("#ecu2"),input3=document.querySelector("#ecu3"),divMatriz=document.querySelector(".matriz"),result1=document.querySelector("#result1"),result2=document.querySelector("#result2"),result3=document.querySelector("#result3"),btn=document.querySelector("#btn"),dibujarMatriz=e=>{const t=`\n<table>\n    <tr>\n        <td>${e[0][0]}</td>\n        <td>${e[0][1]}</td>\n        <td class="td-f">${e[0][2]}</td>\n        <td>${e[0][3]}</td>\n    </tr>\n    <tr>\n        <td>${e[1][0]}</td>\n        <td>${e[1][1]}</td>\n        <td class="td-f">${e[1][2]}</td>\n        <td>${e[1][3]}</td>\n    </tr>\n    <tr>\n        <td>${e[2][0]}</td>\n        <td>${e[2][1]}</td>\n        <td class="td-f">${e[2][2]}</td>\n        <td>${e[2][3]}</td>\n    </tr>\n    </table>`,r=document.createElement("div");return r.innerHTML=t,divMatriz.append(r.firstElementChild),r.firstElementChild},operacion=(e,t,r)=>{let n=[];for(let o=0;o<4;o++)n.push(t[o]-r*e[o]);return n},ponerCeros=e=>{let t=e;if(0!=e[1][0])for(let r=0;r<4;r++)t[1]=operacion(e[0],e[1],e[1][0]);if(0!=e[2][0])for(let r=0;r<4;r++)t[2]=operacion(e[0],e[2],e[2][0]);if(1===e[1][1]&&0!=e[0][1])for(let r=0;r<4;r++)t[0]=operacion(e[1],e[0],e[0][1]);if(1===e[1][1]&&0!=e[2][1])for(let r=0;r<4;r++)t[2]=operacion(e[1],e[2],e[2][1]);if(1===e[2][2]&&0!=e[0][2])for(let r=0;r<4;r++)t[0]=operacion(e[2],e[0],e[0][2]);if(1===e[2][2]&&0!=e[1][2])for(let r=0;r<4;r++)t[1]=operacion(e[2],e[1],e[1][2]);return t},convertirReal=e=>{let t=[];return e.forEach((e=>{t.push(Number(e))})),t},gaussJordan=e=>{let t=[...e],r=1!==e[0][0]&&e[0][0];if(r){for(let n=0;n<4;n++)t[0][n]=e[0][n]/r;t=ponerCeros(t)}else t=ponerCeros(t);if(0===t[1][0]&&0===t[2][0]){let e=1!==t[1][1]&&t[1][1];if(e){for(let r=0;r<4;r++)t[1][r]=t[1][r]/e;t=ponerCeros(t)}else t=ponerCeros(t)}if(0===t[0][1]&&0===t[2][1]){let e=1!==t[2][2]&&t[2][2];if(e){for(let r=0;r<4;r++)t[2][r]=t[2][r]/e;t=ponerCeros(t)}else t=ponerCeros(t)}else ponerCeros(t);for(let e=0;e<3;e++)for(let r=0;r<4;r++)"-0"===t[e][r].toLocaleString("es")&&(t[e][r]=0);return t};btn.addEventListener("click",(()=>{try{divMatriz.innerHTML="";let e=input1.value.match(regex);e.push(result1.value);let t=input2.value.match(regex);t.push(result2.value);let r=input3.value.match(regex);r.push(result3.value);let n=[convertirReal(e),convertirReal(t),convertirReal(r)];dibujarMatriz(n),dibujarMatriz(gaussJordan(n))}catch(e){alert("Lea y asegurese de ingresar bien los datos.")}}));